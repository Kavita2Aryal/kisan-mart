$.ajaxSetup({ headers: { 'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content') } });
$(document).on('change', 'input[type=text], input[type=number], input[type=email], input[type=url], input[type=date], input[type=checkbox], input[type=radio], textarea', function (e) {
    $('#navigate-away-check').val($(this).hasClass('ignore-navigate-away') ? 0 : 1);
});
$(document).on('click', 'button[type=submit], input[type=submit], button.btn-submit', function (e) {
    $('#navigate-away-check').val(0);
})
    .on('keypress', function (e) {
        if (e.which == 13) $('#navigate-away-check').val(0);
    });
$(document).on('keypress', 'input[type=number]', function (e) {
    if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) return false;
});
$(document).on('blur', '.bootstrap-tagsinput input', function (e) {
    if ($(this).val() != '') { $(this).parents('.form-group').find('[data-role=tagsinput]').tagsinput('add', $(this).val()); $(this).val(''); }
});
$(document).on('change keyup', '.custom-decimal-field', function (e) {
    if (!$.isNumeric(parseFloat($(this).val()))) { notify_bar('danger', 'Please enter valid number'); $(this).val(''); }
});
$(document).on('submit', 'form', function (e) {
    var $btn = $(this).find('button[type=submit], input[type=submit]').not('.btn-ignore-loading');
    if ($btn.length > 0) {
        var type = $btn.text().toLowerCase();
        $btn.attr('disabled', true);
        if (type.includes('create')) { $btn.html('CREATING...'); }
        else if (type.includes('update')) { $btn.html('UPDATING...'); }
        else if (type.includes('enable')) { $btn.html('ENABLING...'); }
        else if (type.includes('disable')) { $btn.html('DISABLING...'); }
        else if (type.includes('clear')) { $btn.html('CLEARING...'); }
        else if (type.includes('filter')) { $btn.html('SEARCHING...'); }
        else if (type.includes('send')) { $btn.html('SENDING...'); }
        else { $btn.html('SUBMITTING...'); }
    }
});

var navigateAway = function () { window.onbeforeunload = function () { if ($('#navigate-away-check').val() == 1) { return 'You have not saved your data yet. Do you wish to continue ?'; } } }
var indexing = function () { return 'index_' + Math.floor(Math.random() * 100000) + '_' + Math.floor(Math.random() * 100000); }
var auto_grow = function (e) { e.style.height = "5px"; e.style.height = (e.scrollHeight + 2) + "px"; }
var timer = function () { if (!document.hidden) { idleTime++; if (idleTime >= 30) { locking(); } } else { idleTime = 0; } }
var lockscreen = function () { idleTime = 0; setInterval("timer()", 60000); $(this).mousemove(function (e) { idleTime = 0; }); $(this).keypress(function (e) { idleTime = 0; }); }
var locking = function () { $.ajax({ url: "/lock", type: 'post', success: function (response) { if (response.status == 'success') { window.location.href = "/locked"; } } }); }
$(function () {
    // document.addEventListener('contextmenu', event => event.preventDefault());
    navigateAway(), lockscreen(), tippy('[data-tippy-content]');
});
var money_format = function (value) {
    return (value % 1 == 0) ? parseFloat(Number(value)).toLocaleString() + '.00' : parseFloat(Number(value).toFixed(2)).toLocaleString();
}