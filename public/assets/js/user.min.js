$(document).on('click', '.btn-delete', function (e) {
    e.preventDefault(); 
    var $this = $(this);
    Swal.fire({
        title: 'Are you sure?',
        text: "",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, delete it!'
    }).then((result) => {
        if (result.value) {
            $('form.delete-form-'+$this.data('form')).submit(); 
        }
    });
});

$(document).on('click', '.btn-change-status', function (e) { 
    e.preventDefault(); 
    var $this = $(this);
    Swal.fire({
        title: 'Are you sure?',
        text: "",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, change it!'
    }).then((result) => {
        if (result.value) {
            $.ajax({
                url: $this.data('url'),
                type: 'PUT',
                success: function (response) {
                    if (response == 10) {
                        $this.parents('tr').find('.change-status').html('<strong class="text-success">ACTIVE</strong>');
                        $this.find('span').html('DEACTIVATE');
                        notify_bar('success', 'The '+$this.parents('tbody').data('title')+' has been ACTIVATED.');
                    }
                    else if (response == 0) {
                        $this.parents('tr').find('.change-status').html('<strong class="text-danger">INACTIVE</strong>');
                        $this.find('span').html('ACTIVATE');
                        notify_bar('success', 'The '+$this.parents('tbody').data('title')+' has been DEACTIVATED.');
                    }
                    else {
                        notify_reload('error', 'Something went wrong. please try again later.');
                    }
                }
            });
        }
    });   
});

$(document).on('click', '.btn-view-permission', function (e) {
    e.preventDefault();
    var $this = $(this);
    $.ajax({
        url: $this.data('permission'),
        type: 'PUT',
        success: function (response) {
            $('.modal-permission .modal-body').html(response.html);
            $('.modal-permission').modal('show');
        }
    });
});