var sn_index_fix = function () { 
    var sn_index = 1; 
    $('.slider-management').find('.sn-index').each(function () { 
        $(this).html(sn_index++); 
    }); 
}
sn_index_fix();

$(document).on('click', '.btn-add-slide-item', function (e) {
    e.preventDefault(); 
    $.ajax({
        url: $('.slider-management form').data('generate'),
        type: 'POST',
        data: {type: $(this).data('type')},
        success: function (response) { 
            var $parent = $('.row-slide');
            $('.slider-container-info').hide();
            if ($parent.find('.slide-row').length == 0) {
                $parent.append('<div class="row slide-row"></div>');
            }
            else if ($parent.find('.slide-row:nth-last-child(1)').find('.item-slide').length == 2) {
                $parent.append('<div class="row slide-row"></div>');
            }
            $parent.find('.slide-row:nth-last-child(1)').append(response.html); 
            $parent.animate({ scrollTop: $parent.prop("scrollHeight")}, 500);
            sn_index_fix();
        }
    });
});
$(document).on('click', '.btn-remove-slide', function (e) {
    e.preventDefault(); 
    var $this = $(this);
    Swal.fire({
        title: 'Are you sure?',
        text: "",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, remove it!'
    }).then((result) => {
        if (result.value) {
            var $parent = $('.row-slide');
            $this.parents('.item-slide').remove(); 
            if ($parent.find('.slide-row:last-child').find('.item-slide').length == 0) {
                $parent.find('.slide-row:last-child').remove();
            }
            if ($parent.find('.slide-row').length == 0) {
                $('.slider-container-info').show();
            }
        }
    });
});