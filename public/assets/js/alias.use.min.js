var key_code_array = [96, 126, 60, 62, 34, 39, 92];
$(document).on('keypress', '.alias-check', function (e) { 
    var keycode = (e.keyCode ? e.keyCode : e.which);
    var $this = $(this);
    if (keycode == 32) {
        e.preventDefault();
        var value = $this.val();
        $this.val(value + '-'); 
        return false;
    } 
    else if (key_code_array.indexOf(keycode) != -1) { 
        e.preventDefault();
        return false;
    }
});
$(document).on('blur', '.alias-source', function (e) { 
    $('.alias-value').val($(this).val().replace(/[ .()'",&+%*’:!@#$^;]/gi, "-").toLowerCase()); 
});
$(document).on('change', '.alias-level-source', function (e) { 
    $('.alias-value').val($('.alias-level-1:checked').data('alias') +'/'+ $('.alias-level-2').val().replace(/[ .()'",&+%*’:!@#$^;]/gi, "-").toLowerCase()); 
});
$(document).on('keypress', '.alias-level-2', function (e) { 
    if ($('.alias-level-1').val() == '') { 
        notify_bar('danger', 'Please select a section first.'); e.preventDefault(); return false; 
    } 
});
var check_alias = function (e) {
    var id = $('.alias-index').val(), alias = $('.alias-value').val();
    if (id != '' && alias != '') {
        e.preventDefault();
        var check = $.ajax({
            url: $('#form-has-alias').data('alias'),
            data: { id: id, alias: alias },
            type: 'POST', async: false,
            success: function (response) { return response; }
        }).responseJSON; 

        if (check.hasOwnProperty("msg")) {
            notify_bar('danger', check.msg); return false;
        } 
        else if (check.hasOwnProperty("errors")) {
            notify_bar('danger', check.errors.alias); return false;
        } 
        return true;
    }
    return false;
}
